(this["webpackJsonpplan-work"]=this["webpackJsonpplan-work"]||[]).push([[0],{20:function(e,t,a){e.exports=a(32)},26:function(e,t,a){},32:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),s=a.n(c),l=a(17),u=a(1),o=a.n(u),m=a(3),i=a(5),d=a(6),f=a(7),p=a(8),h=a(18),v=a(16),E=a(19),b=function(e){var t=e.onHandleChange,a=e.data,n=e.prevValue,c=a.title,s=a.type,l=void 0===s?"number":s,u=a.name,o=a.value,m=a.required,i=void 0!==m&&m,d=o-n;return r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"mb-2"},c),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",value:n,disabled:!0}),r.a.createElement("small",{className:"form-text text-muted"},"\u043f\u0440\u043e\u0448\u043b\u044b\u0439 \u043c\u0435\u0441\u044f\u0446"))),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"mb-2 text-secondary"},d>0?d:"..."),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:l,required:i,name:u,onChange:function(e){return t(u,e.target.value)},className:"form-control"}),r.a.createElement("small",{className:"form-text text-muted"},"\u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u043c\u0435\u0441\u044f\u0446")))))};b.defaultProps={prevValue:0};var g=b,N=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(h.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={iceWater:{title:"\u0425\u043e\u043b\u043e\u0434\u043d\u0430 \u0432\u043e\u0434\u0430",name:"iceWater",value:"",required:!0},hotWaterBack:{title:"\u0413.\u0412.\u0412",name:"hotWaterBack",value:"",required:!0},hotWater:{title:"\u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430",name:"hotWater",value:""},gas:{title:"\u0413\u0430\u0437",name:"gas",value:""},light:{title:"\u0421\u0432\u0435\u0442",name:"light",value:""}},a.onSubmit=function(e){e.preventDefault();var t=a.props.onItemAdded,n=e.target;t({iceWater:Number(n.iceWater.value),hotWater:Number(n.hotWater.value),hotWaterBack:Number(n.hotWaterBack.value),light:Number(n.light.value),gas:Number(n.gas.value),month:new Date(n.month.value)}),n.reset()},a.handleChange=function(e,t){a.setState((function(a){var n=a[e];return Object(i.a)({},e,Object(d.a)({},n,{value:t}))}))},a.getTwoDigitDateFormat=function(e){return e<10?"0"+e:e},a}return Object(E.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.onSubmit,t=this.handleChange,a=this.getTwoDigitDateFormat,n=this.props.lastCounters,c=this.state,s=c.iceWater,l=c.hotWaterBack,u=c.hotWater,o=c.gas,m=c.light,i=new Date,d="".concat(i.getFullYear(),"-").concat(a(i.getMonth()+1));return r.a.createElement("div",{className:"col-md-8 mx-auto"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("form",{onSubmit:e},r.a.createElement("div",{className:"form-row"},r.a.createElement(g,{onHandleChange:t,data:s,prevValue:n.iceWater}),r.a.createElement(g,{onHandleChange:t,data:l,prevValue:n.hotWaterBack}),r.a.createElement(g,{onHandleChange:t,data:u,prevValue:n.hotWater}),r.a.createElement(g,{onHandleChange:t,data:o,prevValue:n.gas}),r.a.createElement(g,{onHandleChange:t,data:m,prevValue:n.light}),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"col-12 mb-2"},r.a.createElement("span",{className:"text-success"},"\u041c\u0435\u0441\u044f\u0446")),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{required:!0,type:"month",name:"month",defaultValue:d,className:"form-control"})))))),r.a.createElement("button",{type:"submit",className:"btn btn-success"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))))}}]),t}(n.Component);N.defaultProps={lastCounters:{}};var x=N,w=function(){return r.a.createElement("div",{className:"d-flex justify-content-center mt-5"},r.a.createElement("div",{className:"spinner-border text-secondary",role:"status"},r.a.createElement("span",{className:"sr-only"},"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...")))},y=function(e){var t=e.items,a=e.onItemDelete;if(null===t)return r.a.createElement("div",{className:"col-md-8 mx-auto mt-4"},r.a.createElement(w,null));if(!Object.keys(t).length)return r.a.createElement("div",{className:"col-md-8 mx-auto mt-4"},r.a.createElement("p",null,"\u0412\u043d\u0435\u0441\u0438\u0442\u0435 \u043f\u0435\u0440\u0432\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435."));t.sort((function(e,t){return t.month.seconds-e.month.seconds}));var n=Object.values(t).map((function(e){var t=e.id,n=e.iceWater,c=e.hotWater,s=e.hotWaterBack,l=e.light,u=e.gas,o=e.month.toDate().toLocaleDateString("ua-UA",{month:"numeric",year:"numeric"});return r.a.createElement("tr",{key:t},r.a.createElement("td",null,o),r.a.createElement("td",null,n),r.a.createElement("td",null,c),r.a.createElement("td",null,s),r.a.createElement("td",null,l),r.a.createElement("td",null,u),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return a(t)},className:"btn btn-danger btn-sm"},r.a.createElement("i",{className:"far fa-trash-alt"}))))}));return r.a.createElement("div",{className:"col-md-8 mx-auto mt-4"},r.a.createElement("h2",{className:"text-center"},"\u0418\u0441\u0442\u043e\u0440\u0438\u044f"),r.a.createElement("div",{className:"table-responsive-xl"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"\u0425\u043e\u043b\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0434\u0430"),r.a.createElement("th",null,"\u0413\u043e\u0440\u044f\u0447\u0430\u044f \u0432\u043e\u0434\u0430"),r.a.createElement("th",null,"\u0413.\u0412.\u0412"),r.a.createElement("th",null,"\u0421\u0432\u0435\u0442"),r.a.createElement("th",null,"\u0413\u0430\u0437"),r.a.createElement("th",null))),r.a.createElement("tbody",null,n))))},j=(a(26),function(e){var t=e.msg,a=t.type,n=void 0===a?1:a,c=t.text;if(!c)return null;return r.a.createElement("div",{className:"bMessage"},r.a.createElement("div",{className:"alert alert-".concat(["danger","success","warning"][n]),role:"alert"},c))}),O=function(e){var t=e.onSignIn;return r.a.createElement("div",{className:"col-md-8 mx-auto"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=e.target;t(a.password.value),a.reset()}},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"password",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"}))),r.a.createElement("div",{className:"text-center"},r.a.createElement("button",{type:"submit",className:"btn btn-success"},"\u0412\u043e\u0439\u0442\u0438")))))},k=a(2),W=a.n(k);a(27),a(31);W.a.initializeApp({apiKey:"AIzaSyCfM0byadtN0hT5NHZic-iIXuNByceebBM",authDomain:"housing-meter.firebaseapp.com",databaseURL:"https://housing-meter.firebaseio.com",projectId:"housing-meter",storageBucket:"housing-meter.appspot.com",messagingSenderId:"1004021485217",appId:"1:1004021485217:web:d6d4d3057749769353eae0"});W.a;var D=W.a.firestore(),I=W.a.auth(),S=new(function(){function e(){Object(f.a)(this,e),this._apiBase=D.collection("apartment/ODbPGN3kqlmPiQUhjc9Z/months/"),this.collectIdsAndDocs=function(e){return Object(d.a)({id:e.id},e.data())}}return Object(p.a)(e,[{key:"getData",value:function(){var e,t;return o.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o.a.awrap(this._apiBase.get());case 2:return e=a.sent,t=e.docs.map(this.collectIdsAndDocs),a.abrupt("return",t);case 5:case"end":return a.stop()}}),null,this)}},{key:"itemAdd",value:function(e){var t,a,n;return o.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.a.awrap(this._apiBase.add(e));case 2:return t=r.sent,r.next=5,o.a.awrap(t.get());case 5:return a=r.sent,n=this.collectIdsAndDocs(a),r.abrupt("return",n);case 8:case"end":return r.stop()}}),null,this)}},{key:"itemDelete",value:function(e){return o.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:this._apiBase.doc(e).delete();case 1:case"end":return t.stop()}}),null,this)}},{key:"authStatus",value:function(){var e;return o.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=null,t.next=3,o.a.awrap(I.onAuthStateChanged((function(t){return e=t?t.uid:null})));case 3:return t.abrupt("return",e);case 4:case"end":return t.stop()}}))}},{key:"signIn",value:function(e){var t,a;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=null,a=!1,n.next=4,o.a.awrap(I.signInWithEmailAndPassword("prainua@gmail.com",e).then((function(e){return t=e.user.uid})).catch((function(e){return a=e.message})));case 4:return n.abrupt("return",{userId:t,error:a});case 5:case"end":return n.stop()}}))}}]),e}()),C=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)({text:""}),u=Object(m.a)(s,2),i=u[0],d=u[1],f=Object(n.useState)(null),p=Object(m.a)(f,2),h=p[0],v=p[1],E=Object(n.useState)({}),b=Object(m.a)(E,2),g=b[0],N=b[1];Object(n.useEffect)((function(){!function(){var e,t;o.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o.a.awrap(S.getData());case 2:return e=a.sent,a.next=5,o.a.awrap(S.authStatus());case 5:t=a.sent,c(e),v(t);case 8:case"end":return a.stop()}}))}()}),[]),Object(n.useEffect)((function(){c((function(e){return e.sort((function(e,t){return t.month.seconds-e.month.seconds})),N(e[0]),e}))}),[a]),Object(n.useEffect)((function(){var e=setTimeout((function(){return d({text:""})}),5e3);return function(){return clearTimeout(e)}}),[i]);return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement(j,{msg:i}),h?r.a.createElement("div",null,r.a.createElement(x,{onItemAdded:function(e){var t;return o.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o.a.awrap(S.itemAdd(e));case 2:t=a.sent,c((function(e){return[t].concat(Object(l.a)(e))})),d({text:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0438 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u043e\u0432 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u044b!"});case 5:case"end":return a.stop()}}))},lastCounters:g}),r.a.createElement(y,{items:a,onItemDelete:function(e){var t;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(window.confirm("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c?")){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,o.a.awrap(S.itemDelete(e));case 5:t=a.filter((function(t){return t.id!==e})),c(t),d({text:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0438 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u044b!",type:0});case 8:case"end":return n.stop()}}))}})):r.a.createElement(O,{onSignIn:function(e){var t;return o.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o.a.awrap(S.signIn(e));case 2:(t=a.sent).error?d({text:t.error,type:0}):(v(t.userId),d({text:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0432\u043e\u0448\u043b\u0438!"}));case 4:case"end":return a.stop()}}))}})))};s.a.render(r.a.createElement(C,null),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.6f377a54.chunk.js.map